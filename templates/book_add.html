{% extends "base.html" %}
{% block content %}

<h2 class="text-2xl font-bold text-blue-700 mb-6">➕ 책 등록</h2>

{% if not_logged_in %}
  <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6">
    책을 등록하려면 먼저 <a href="/login/" class="underline text-red-800 font-semibold">로그인</a> 해주세요.
  </div>
{% else %}
  <div class="bg-white shadow rounded-lg p-6 w-full max-w-2xl">
    <form method="post" enctype="multipart/form-data" class="space-y-6">
      {% csrf_token %}

      <div>
        <label class="block font-semibold text-gray-700 mb-1">제목</label>
        <input type="text" name="title" value="{{ form.title.value|default:'' }}" placeholder="제목 입력"
               class="w-full px-3 py-2 border border-black rounded bg-white" required>
      </div>

      <div>
        <label class="block font-semibold text-gray-700 mb-1">저자</label>
        <input type="text" name="author" value="{{ form.author.value|default:'' }}" placeholder="저자 입력"
               class="w-full px-3 py-2 border border-black rounded bg-white" required>
      </div>

      <div>
        <label class="block font-semibold text-gray-700 mb-1">표지 이미지</label>
        <input type="file" name="image"
               class="w-full px-3 py-2 border border-black rounded bg-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-600 file:text-white hover:file:bg-blue-700">
      </div>

      <div>
        <label class="block font-semibold text-gray-700 mb-1">책 설명</label>
        <textarea name="description" rows="4" placeholder="책 설명 입력"
                  class="w-full px-3 py-2 border border-black rounded bg-white">{{ form.description.value|default:'' }}</textarea>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block font-semibold text-gray-700 mb-1">출판일</label>
          <input type="date" name="published_date" value="{{ form.published_date.value|default:'' }}"
                 class="w-full px-3 py-2 border border-black rounded bg-white">
        </div>
        <div>
          <label class="block font-semibold text-gray-700 mb-1">ISBN</label>
          <input type="text" name="isbn" value="{{ form.isbn.value|default:'' }}" placeholder="ISBN 입력"
                 class="w-full px-3 py-2 border border-black rounded bg-white">
        </div>
      </div>

      <div>
        <label class="block font-semibold text-gray-700 mb-1">카테고리</label>
        <input type="text" name="category" value="{{ form.category.value|default:'' }}" placeholder="카테고리 입력"
               class="w-full px-3 py-2 border border-black rounded bg-white">
      </div>

      <div class="pt-4">
        <button type="submit"
                class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded w-full md:w-auto">
          등록
        </button>
      </div>
    </form>
  </div>
{% endif %}

{% endblock %}
